"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Cregister.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Cregister.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\auth\\register.ts */ \"(api)/./src/pages/api/auth/register.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDYXV0aCU1Q3JlZ2lzdGVyLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw0REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnRyZWN5Y2xlLXdlYi8/NDA0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxhdXRoXFxcXHJlZ2lzdGVyLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9yZWdpc3RlclwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvcmVnaXN0ZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Cregister.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/register.ts":
/*!****************************************!*\
  !*** ./src/pages/api/auth/register.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n// This is your user registration API route.\n// Final path: `pages/api/auth/register.ts`\n/*\r\n--- DUMMY DATA FOR TESTING ---\r\n\r\nYou can use these JSON objects in a tool like Postman to test this endpoint.\r\nSend a POST request to /api/auth/register with one of these bodies.\r\n\r\n-- 1. DUMMY HOUSEHOLD USER --\r\n{\r\n    \"name\": \"Priya Sharma\",\r\n    \"email\": \"priya.sharma@example.com\",\r\n    \"password\": \"password123\",\r\n    \"phone\": \"9876543210\",\r\n    \"role\": \"HOUSEHOLD\",\r\n    \"address\": \"123, 4th Main, Indiranagar, Bengaluru, Karnataka 560038\",\r\n    \"dateOfBirth\": \"1990-05-15\"\r\n}\r\n\r\n\r\n-- 2. DUMMY COLLECTOR --\r\n{\r\n    \"name\": \"Ramesh Kumar\",\r\n    \"email\": \"ramesh.kumar@example.com\",\r\n    \"password\": \"password456\",\r\n    \"phone\": \"8765432109\",\r\n    \"role\": \"COLLECTOR\",\r\n    \"address\": \"56, 7th Cross, Jayanagar, Bengaluru, Karnataka 560041\",\r\n    \"latitude\": 12.9293,\r\n    \"longitude\": 77.5826,\r\n    \"identityDocumentUrl\": \"https://example.com/ids/ramesh_kumar_id.pdf\",\r\n    \"vehicleDetails\": \"Tata Ace - KA-05-MN-6789\",\r\n    \"acceptedWasteTypes\": [\"E_WASTE\", \"RECYCLABLE\", \"GENERAL\"]\r\n}\r\n\r\n*/ \n\n// Initialize Prisma Client\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    try {\n        const { email, password, phone, name, address, role, // Household specific\n        dateOfBirth, // Collector specific\n        identityDocumentUrl, acceptedWasteTypes, vehicleDetails, latitude, longitude } = req.body;\n        // --- 1. Input Validation ---\n        if (!email || !password || !phone || !name || !role || !address) {\n            return res.status(400).json({\n                message: \"Missing required fields. Email, password, phone, name, role, and address are required for all users.\"\n            });\n        }\n        if (password.length < 8) {\n            return res.status(400).json({\n                message: \"Password must be at least 8 characters long.\"\n            });\n        }\n        if (role !== \"HOUSEHOLD\" && role !== \"COLLECTOR\") {\n            return res.status(400).json({\n                message: \"Invalid role specified. Must be HOUSEHOLD or COLLECTOR.\"\n            });\n        }\n        // --- 2. Check for Existing User ---\n        const existingUser = await prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            return res.status(409).json({\n                message: \"User with this email already exists.\"\n            });\n        }\n        const existingPhone = await prisma.user.findUnique({\n            where: {\n                phone\n            }\n        });\n        if (existingPhone) {\n            return res.status(409).json({\n                message: \"User with this phone number already exists.\"\n            });\n        }\n        // --- 3. Hash the Password ---\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 10);\n        // --- 4. Create the User and Profile in a Transaction ---\n        const newUser = await prisma.$transaction(async (tx)=>{\n            const user = await tx.user.create({\n                data: {\n                    email,\n                    password: hashedPassword,\n                    phone,\n                    role\n                }\n            });\n            if (role === \"HOUSEHOLD\") {\n                if (!dateOfBirth) {\n                    throw new Error(\"Household users must provide dateOfBirth.\");\n                }\n                await tx.householdProfile.create({\n                    data: {\n                        userId: user.id,\n                        name,\n                        dateOfBirth: new Date(dateOfBirth),\n                        address\n                    }\n                });\n            } else if (role === \"COLLECTOR\") {\n                // For collectors, we now require these fields for a complete profile from the start.\n                if (!identityDocumentUrl || !Array.isArray(acceptedWasteTypes) || acceptedWasteTypes.length === 0) {\n                    throw new Error(\"Collectors must provide an identity document URL and specify at least one accepted waste type.\");\n                }\n                await tx.collectorProfile.create({\n                    data: {\n                        userId: user.id,\n                        name,\n                        address,\n                        latitude,\n                        longitude,\n                        identityDocumentUrl,\n                        vehicleDetails,\n                        acceptedWasteTypes: acceptedWasteTypes\n                    }\n                });\n            }\n            return user;\n        });\n        // --- 5. Return Success Response ---\n        const { password: _, ...userWithoutPassword } = newUser;\n        return res.status(201).json({\n            message: \"User created successfully!\",\n            user: userWithoutPassword\n        });\n    } catch (error) {\n        console.error(\"Registration Error:\", error);\n        // Provide more specific error messages to the client\n        if (error.message.includes(\"Household users\") || error.message.includes(\"Collectors must\")) {\n            return res.status(400).json({\n                message: error.message\n            });\n        }\n        return res.status(500).json({\n            message: \"An error occurred on the server.\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDRSx1QkFBdUIsQ0FBQzBCLE1BQU1DLE9BQU8sQ0FBQzFCLHVCQUF1QkEsbUJBQW1CTyxNQUFNLEtBQUssR0FBRztvQkFDL0YsTUFBTSxJQUFJYSxNQUFNO2dCQUNwQjtnQkFFQSxNQUFNSCxHQUFHVSxnQkFBZ0IsQ0FBQ1QsTUFBTSxDQUFDO29CQUM3QkMsTUFBTTt3QkFDRkcsUUFBUWIsS0FBS2MsRUFBRTt3QkFDZjVCO3dCQUNBQzt3QkFDQU07d0JBQ0FDO3dCQUNBSjt3QkFDQUU7d0JBQ0FELG9CQUFvQkE7b0JBQ3hCO2dCQUNKO1lBQ0o7WUFFQSxPQUFPUztRQUNYO1FBRUEscUNBQXFDO1FBQ3JDLE1BQU0sRUFBRWhCLFVBQVVtQyxDQUFDLEVBQUUsR0FBR0MscUJBQXFCLEdBQUdkO1FBQ2hELE9BQU81QixJQUFJRyxNQUFNLENBQUMsS0FBS2UsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBOEJHLE1BQU1vQjtRQUFvQjtJQUVqRyxFQUFFLE9BQU9DLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLHFEQUFxRDtRQUNyRCxJQUFJQSxNQUFNeEIsT0FBTyxDQUFDMEIsUUFBUSxDQUFDLHNCQUFzQkYsTUFBTXhCLE9BQU8sQ0FBQzBCLFFBQVEsQ0FBQyxvQkFBb0I7WUFDeEYsT0FBTzdDLElBQUlHLE1BQU0sQ0FBQyxLQUFLZSxJQUFJLENBQUM7Z0JBQUVDLFNBQVN3QixNQUFNeEIsT0FBTztZQUFDO1FBQ3pEO1FBQ0EsT0FBT25CLElBQUlHLE1BQU0sQ0FBQyxLQUFLZSxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFtQztJQUM1RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnRyZWN5Y2xlLXdlYi8uL3NyYy9wYWdlcy9hcGkvYXV0aC9yZWdpc3Rlci50cz8wOWFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaXMgeW91ciB1c2VyIHJlZ2lzdHJhdGlvbiBBUEkgcm91dGUuXHJcbi8vIEZpbmFsIHBhdGg6IGBwYWdlcy9hcGkvYXV0aC9yZWdpc3Rlci50c2BcclxuXHJcbi8qXHJcbi0tLSBEVU1NWSBEQVRBIEZPUiBURVNUSU5HIC0tLVxyXG5cclxuWW91IGNhbiB1c2UgdGhlc2UgSlNPTiBvYmplY3RzIGluIGEgdG9vbCBsaWtlIFBvc3RtYW4gdG8gdGVzdCB0aGlzIGVuZHBvaW50LlxyXG5TZW5kIGEgUE9TVCByZXF1ZXN0IHRvIC9hcGkvYXV0aC9yZWdpc3RlciB3aXRoIG9uZSBvZiB0aGVzZSBib2RpZXMuXHJcblxyXG4tLSAxLiBEVU1NWSBIT1VTRUhPTEQgVVNFUiAtLVxyXG57XHJcbiAgICBcIm5hbWVcIjogXCJQcml5YSBTaGFybWFcIixcclxuICAgIFwiZW1haWxcIjogXCJwcml5YS5zaGFybWFAZXhhbXBsZS5jb21cIixcclxuICAgIFwicGFzc3dvcmRcIjogXCJwYXNzd29yZDEyM1wiLFxyXG4gICAgXCJwaG9uZVwiOiBcIjk4NzY1NDMyMTBcIixcclxuICAgIFwicm9sZVwiOiBcIkhPVVNFSE9MRFwiLFxyXG4gICAgXCJhZGRyZXNzXCI6IFwiMTIzLCA0dGggTWFpbiwgSW5kaXJhbmFnYXIsIEJlbmdhbHVydSwgS2FybmF0YWthIDU2MDAzOFwiLFxyXG4gICAgXCJkYXRlT2ZCaXJ0aFwiOiBcIjE5OTAtMDUtMTVcIlxyXG59XHJcblxyXG5cclxuLS0gMi4gRFVNTVkgQ09MTEVDVE9SIC0tXHJcbntcclxuICAgIFwibmFtZVwiOiBcIlJhbWVzaCBLdW1hclwiLFxyXG4gICAgXCJlbWFpbFwiOiBcInJhbWVzaC5rdW1hckBleGFtcGxlLmNvbVwiLFxyXG4gICAgXCJwYXNzd29yZFwiOiBcInBhc3N3b3JkNDU2XCIsXHJcbiAgICBcInBob25lXCI6IFwiODc2NTQzMjEwOVwiLFxyXG4gICAgXCJyb2xlXCI6IFwiQ09MTEVDVE9SXCIsXHJcbiAgICBcImFkZHJlc3NcIjogXCI1NiwgN3RoIENyb3NzLCBKYXlhbmFnYXIsIEJlbmdhbHVydSwgS2FybmF0YWthIDU2MDA0MVwiLFxyXG4gICAgXCJsYXRpdHVkZVwiOiAxMi45MjkzLFxyXG4gICAgXCJsb25naXR1ZGVcIjogNzcuNTgyNixcclxuICAgIFwiaWRlbnRpdHlEb2N1bWVudFVybFwiOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vaWRzL3JhbWVzaF9rdW1hcl9pZC5wZGZcIixcclxuICAgIFwidmVoaWNsZURldGFpbHNcIjogXCJUYXRhIEFjZSAtIEtBLTA1LU1OLTY3ODlcIixcclxuICAgIFwiYWNjZXB0ZWRXYXN0ZVR5cGVzXCI6IFtcIkVfV0FTVEVcIiwgXCJSRUNZQ0xBQkxFXCIsIFwiR0VORVJBTFwiXVxyXG59XHJcblxyXG4qL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCwgV2FzdGVUeXBlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuXHJcbi8vIEluaXRpYWxpemUgUHJpc21hIENsaWVudFxyXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ1BPU1QnXSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IFxyXG4gICAgICAgIGVtYWlsLCBwYXNzd29yZCwgcGhvbmUsIG5hbWUsIGFkZHJlc3MsIHJvbGUsIFxyXG4gICAgICAgIC8vIEhvdXNlaG9sZCBzcGVjaWZpY1xyXG4gICAgICAgIGRhdGVPZkJpcnRoLFxyXG4gICAgICAgIC8vIENvbGxlY3RvciBzcGVjaWZpY1xyXG4gICAgICAgIGlkZW50aXR5RG9jdW1lbnRVcmwsIGFjY2VwdGVkV2FzdGVUeXBlcywgdmVoaWNsZURldGFpbHMsIGxhdGl0dWRlLCBsb25naXR1ZGVcclxuICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyAtLS0gMS4gSW5wdXQgVmFsaWRhdGlvbiAtLS1cclxuICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkIHx8ICFwaG9uZSB8fCAhbmFtZSB8fCAhcm9sZSB8fCAhYWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMuIEVtYWlsLCBwYXNzd29yZCwgcGhvbmUsIG5hbWUsIHJvbGUsIGFuZCBhZGRyZXNzIGFyZSByZXF1aXJlZCBmb3IgYWxsIHVzZXJzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAocm9sZSAhPT0gJ0hPVVNFSE9MRCcgJiYgcm9sZSAhPT0gJ0NPTExFQ1RPUicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCByb2xlIHNwZWNpZmllZC4gTXVzdCBiZSBIT1VTRUhPTEQgb3IgQ09MTEVDVE9SLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIDIuIENoZWNrIGZvciBFeGlzdGluZyBVc2VyIC0tLVxyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0cy4nIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBleGlzdGluZ1Bob25lID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IHBob25lIH0gfSk7XHJcbiAgICBpZiAoZXhpc3RpbmdQaG9uZSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIHdpdGggdGhpcyBwaG9uZSBudW1iZXIgYWxyZWFkeSBleGlzdHMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0gMy4gSGFzaCB0aGUgUGFzc3dvcmQgLS0tXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcblxyXG4gICAgLy8gLS0tIDQuIENyZWF0ZSB0aGUgVXNlciBhbmQgUHJvZmlsZSBpbiBhIFRyYW5zYWN0aW9uIC0tLVxyXG4gICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHR4LnVzZXIuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICBwaG9uZSxcclxuICAgICAgICAgICAgICAgIHJvbGUsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdIT1VTRUhPTEQnKSB7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZU9mQmlydGgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSG91c2Vob2xkIHVzZXJzIG11c3QgcHJvdmlkZSBkYXRlT2ZCaXJ0aC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCB0eC5ob3VzZWhvbGRQcm9maWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9mQmlydGg6IG5ldyBEYXRlKGRhdGVPZkJpcnRoKSxcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdDT0xMRUNUT1InKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBjb2xsZWN0b3JzLCB3ZSBub3cgcmVxdWlyZSB0aGVzZSBmaWVsZHMgZm9yIGEgY29tcGxldGUgcHJvZmlsZSBmcm9tIHRoZSBzdGFydC5cclxuICAgICAgICAgICAgaWYgKCFpZGVudGl0eURvY3VtZW50VXJsIHx8ICFBcnJheS5pc0FycmF5KGFjY2VwdGVkV2FzdGVUeXBlcykgfHwgYWNjZXB0ZWRXYXN0ZVR5cGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2xsZWN0b3JzIG11c3QgcHJvdmlkZSBhbiBpZGVudGl0eSBkb2N1bWVudCBVUkwgYW5kIHNwZWNpZnkgYXQgbGVhc3Qgb25lIGFjY2VwdGVkIHdhc3RlIHR5cGUuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNvbGxlY3RvclByb2ZpbGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICBpZGVudGl0eURvY3VtZW50VXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVEZXRhaWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkV2FzdGVUeXBlczogYWNjZXB0ZWRXYXN0ZVR5cGVzIGFzIFdhc3RlVHlwZVtdLCAvLyBDYXN0aW5nIHRvIHRoZSBlbnVtIHR5cGVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gLS0tIDUuIFJldHVybiBTdWNjZXNzIFJlc3BvbnNlIC0tLVxyXG4gICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gbmV3VXNlcjtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHVzZXI6IHVzZXJXaXRob3V0UGFzc3dvcmQgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdpc3RyYXRpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlcyB0byB0aGUgY2xpZW50XHJcbiAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnSG91c2Vob2xkIHVzZXJzJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQ29sbGVjdG9ycyBtdXN0JykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0FuIGVycm9yIG9jY3VycmVkIG9uIHRoZSBzZXJ2ZXIuJyB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImJjcnlwdCIsInByaXNtYSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJlbmQiLCJlbWFpbCIsInBhc3N3b3JkIiwicGhvbmUiLCJuYW1lIiwiYWRkcmVzcyIsInJvbGUiLCJkYXRlT2ZCaXJ0aCIsImlkZW50aXR5RG9jdW1lbnRVcmwiLCJhY2NlcHRlZFdhc3RlVHlwZXMiLCJ2ZWhpY2xlRGV0YWlscyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiYm9keSIsImpzb24iLCJtZXNzYWdlIiwibGVuZ3RoIiwiZXhpc3RpbmdVc2VyIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImV4aXN0aW5nUGhvbmUiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJuZXdVc2VyIiwiJHRyYW5zYWN0aW9uIiwidHgiLCJjcmVhdGUiLCJkYXRhIiwiRXJyb3IiLCJob3VzZWhvbGRQcm9maWxlIiwidXNlcklkIiwiaWQiLCJEYXRlIiwiQXJyYXkiLCJpc0FycmF5IiwiY29sbGVjdG9yUHJvZmlsZSIsIl8iLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwiZXJyb3IiLCJjb25zb2xlIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/register.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Cregister.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();